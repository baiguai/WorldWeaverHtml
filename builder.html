<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WorldWeaver Builder</title>

    <!--
        Formatting notes:
        This code is formatted for indentation level folding.
        There are sections indented between comments, so that they
        remain collapsed at certain levels, to make code navigation
        and reading easier.
    -->

    <!-- Styles -->
        <style>
            body {
                background-color: black;
                color: white;
                font-family: monospace;
                margin: 0;
                display: flex;
                flex-direction: column;
                height: 100vh;
            }

            /* Initially hide the admin interface */
            #admin-interface {
                flex: 1;
                height: 100vh;
                display: flex;
            }

            #treeview {
                width: 400px;
                border-right: 1px solid white;
                overflow-y: auto;
                padding: 10px;
                resize: horizontal;
                min-width: 100px;
                max-width: 50%;
            }

            #treeview ul {
                list-style: none;
                padding-left: 10px;
            }

            #treeview li {
                cursor: pointer;
                padding: 5px;
            }

            #details {
                flex: 1;
                padding: 10px;
            }

            #admin-input-container {
                display: none;
                padding: 10px;
                background: black;
                border-top: 1px solid white;
            }

            #admin-input {
                width: 100%;
                background: black;
                color: white;
                border: none;
                padding: 10px;
                font-size: 1rem;
                font-family: monospace;
            }

            #admin-input:focus {
                outline: none;
            }

            #editor-container {
                display: none;
                flex: 1;
                padding: 10px;
                flex-direction: column;
            }

            #editor {
                flex: 1;
                background: black;
                color: white;
                border: 1px solid white;
                padding: 10px;
                font-size: 1rem;
                font-family: monospace;
                white-space: pre;
                overflow-y: auto;
            }

            #editor-close {
                align-self: flex-end;
                cursor: pointer;
                padding: 5px;
                color: red;
            }

            .link {
                cursor: pointer;
                text-decoration: underline;
            }
        </style>
    <!-- End Styles -->
</head>
<body>
    <div id="admin-interface" style="display: flex;">
        <div id="treeview"><ul><li data-key="game"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <g aria-label="G" id="text8654" style="font-weight:bold;font-size:3.8988px;font-family:'ITC Bauhaus';-inkscape-font-specification:'ITC Bauhaus Bold';fill:none;stroke:#8e8e8e;stroke-width:0.0142143;stroke-linejoin:bevel;paint-order:stroke fill markers"> <path d="m 2.2882142,3.5085379 c 0.4054751,0 0.7563671,-0.1208628 1.0448783,-0.3586896 V 1.9490179 H 2.1790478 v 0.428868 h 0.6666947 v 0.5770224 c -0.136458,0.070178 -0.3041063,0.1130652 -0.4912487,0.1130652 -0.565326,0 -0.9279144,-0.3781836 -0.9279144,-0.9824976 0,-0.58482 0.3391956,-0.9162179 0.9396108,-0.9162179 0.2378268,0 0.5146415,0.050684 0.7251767,0.1247616 L 3.2317237,0.90024076 C 2.9977957,0.78717557 2.7014869,0.72479477 2.3973806,0.72479477 c -0.9084204,0 -1.4971392,0.56922483 -1.4971392,1.41916313 0,0.818748 0.5536296,1.36458 1.3879728,1.36458 z" style="font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke:none" id="path9293"></path> </g> </svg> Sample Game</span><ul style="display: block;"><li data-key="pf4wcjaqs9jm8zq6awm"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <text xml:space="preserve" style="font-weight:bold;font-size:3.45983px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0126139;stroke-linejoin:bevel;paint-order:stroke fill markers" x="1.644399" y="3.3846965" id="text21025"><tspan id="tspan21023" style="stroke-width:0.0126139" x="1.644399" y="3.3846965">i</tspan></text> </svg> admin pass</span></li><li data-key="9wh0ai7glyhm8zq92fn"><span style="cursor: pointer;"><svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" xmlns="http://www.w3.org/2000/svg"><path style="fill:none;stroke:#ffffff;stroke-width:0.264583;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;" d="M 0.69371456,2.1166666 H 3.5396187"></path></svg> error</span></li><li data-key="nyoy47hnhtgm8zqaoi8"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <rect style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.165345;stroke-linejoin:bevel;paint-order:stroke fill markers" id="rect15482" width="1.9418752" height="2.6706309" x="1.1457291" y="0.78135115"></rect> <path style="fill:none;fill-opacity:1;stroke:#939393;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" d="M 1.5488185,1.5004032 H 2.6845148" id="path15542"></path> <path style="fill:none;fill-opacity:1;stroke:#939393;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" d="M 1.5488185,2.1166666 H 2.6845148" id="path16407"></path> </svg> die message</span></li><li data-key="suli02fs0cm92js21q"><span style="cursor: pointer;"><svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" xmlns="http://www.w3.org/2000/svg"><path style="fill:none;stroke:#ffffff;stroke-width:0.264583;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;" d="M 0.69371456,2.1166666 H 3.5396187"></path></svg> Start Screen</span></li><li data-key="n4n2fxgt2tm930w294"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <text xml:space="preserve" style="font-weight:bold;font-size:3.45983px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0126139;stroke-linejoin:bevel;paint-order:stroke fill markers" x="1.644399" y="3.3846965" id="text21025"><tspan id="tspan21023" style="stroke-width:0.0126139" x="1.644399" y="3.3846965">i</tspan></text> </svg> File Name</span></li></ul></li><li data-key="3ielqbe2ltm91oyuf9"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <circle style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" id="path17273" cx="2.1166666" cy="2.1166666" r="1.3248924"></circle> <path style="fill:none;fill-opacity:1;stroke:#8e8e8e;stroke-width:0.19686;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" d="M 1.1448412,2.1166666 H 3.0884921" id="path17275"></path> </svg> Global</span><ul style="display: none;"><li data-key="69lyn6u2u6nm91p0qv7"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <path style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;paint-order:stroke fill markers" id="path19523" d="m 1.275162,2.0133541 -0.7057629,0.4074724 -0.70576287,0.4074724 3e-8,-0.8149449 -3e-8,-0.8149447 0.70576291,0.4074724 z" transform="translate(0.61360234,0.10331256)"></path> <path style="fill:none;fill-opacity:1;stroke:#ffffff;stroke-width:0.185208;stroke-linejoin:bevel;paint-order:stroke fill markers;stroke-opacity:1" d="M 1.952999,2.9316113 H 3.5563688" id="path19525"></path> </svg> Title</span><ul style="display: block;"><li data-key="vl9tfy7wmkm91p1baj"><span style="cursor: pointer;"><svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" xmlns="http://www.w3.org/2000/svg"><path style="fill:none;stroke:#ffffff;stroke-width:0.264583;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;" d="M 0.69371456,2.1166666 H 3.5396187"></path></svg> show game title</span></li></ul></li><li data-key="du2fxwfitpum91p248p"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <path style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;paint-order:stroke fill markers" id="path19523" d="m 1.275162,2.0133541 -0.7057629,0.4074724 -0.70576287,0.4074724 3e-8,-0.8149449 -3e-8,-0.8149447 0.70576291,0.4074724 z" transform="translate(0.61360234,0.10331256)"></path> <path style="fill:none;fill-opacity:1;stroke:#ffffff;stroke-width:0.185208;stroke-linejoin:bevel;paint-order:stroke fill markers;stroke-opacity:1" d="M 1.952999,2.9316113 H 3.5563688" id="path19525"></path> </svg> Stats</span><ul style="display: block;"><li data-key="6tqadr9itmpm91p2w5t"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <g aria-label="!" id="text18965" style="font-weight:bold;font-size:4.37606px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0159544;stroke-linejoin:bevel;paint-order:stroke fill markers"> <path d="m 1.9000508,2.5849076 h 0.437606 L 2.3989217,0.57629608 H 1.838786 Z m 0.214427,1.0721347 c 0.223179,0 0.3763411,-0.1619142 0.3763411,-0.3719651 0,-0.223179 -0.1531621,-0.3850933 -0.3763411,-0.3850933 -0.2231791,0 -0.3719651,0.1619143 -0.3719651,0.3850933 0,0.2100509 0.148786,0.3719651 0.3719651,0.3719651 z" id="path19468"></path> </g> </svg> show stats</span></li></ul></li><li data-key="0e9uq8d1xdim91p5y52"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <path style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;paint-order:stroke fill markers" id="path19523" d="m 1.275162,2.0133541 -0.7057629,0.4074724 -0.70576287,0.4074724 3e-8,-0.8149449 -3e-8,-0.8149447 0.70576291,0.4074724 z" transform="translate(0.61360234,0.10331256)"></path> <path style="fill:none;fill-opacity:1;stroke:#ffffff;stroke-width:0.185208;stroke-linejoin:bevel;paint-order:stroke fill markers;stroke-opacity:1" d="M 1.952999,2.9316113 H 3.5563688" id="path19525"></path> </svg> Inventory</span><ul style="display: block;"><li data-key="pohxz1iocgm91p6pom"><span style="cursor: pointer;"><svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" xmlns="http://www.w3.org/2000/svg"><path style="fill:none;stroke:#ffffff;stroke-width:0.264583;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;" d="M 0.69371456,2.1166666 H 3.5396187"></path></svg> show inventory</span></li></ul></li><li data-key="w97g79kzvugm91p7k05"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <path style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;paint-order:stroke fill markers" id="path19523" d="m 1.275162,2.0133541 -0.7057629,0.4074724 -0.70576287,0.4074724 3e-8,-0.8149449 -3e-8,-0.8149447 0.70576291,0.4074724 z" transform="translate(0.61360234,0.10331256)"></path> <path style="fill:none;fill-opacity:1;stroke:#ffffff;stroke-width:0.185208;stroke-linejoin:bevel;paint-order:stroke fill markers;stroke-opacity:1" d="M 1.952999,2.9316113 H 3.5563688" id="path19525"></path> </svg> Arm</span><ul style="display: block;"><li data-key="51w1x5oxgt3m91p86i4"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <path style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;paint-order:stroke fill markers" id="path19523" d="m 1.275162,2.0133541 -0.7057629,0.4074724 -0.70576287,0.4074724 3e-8,-0.8149449 -3e-8,-0.8149447 0.70576291,0.4074724 z" transform="translate(0.61360234,0.10331256)"></path> <rect style="fill:#ffffff;stroke-width:0.185208;stroke-linejoin:bevel;paint-order:stroke fill markers" id="rect20904" width="1.4300268" height="1.9852276" x="2.4454238" y="1.1240529"></rect> </svg> set armed weapon</span></li></ul></li></ul></li><li data-key="at73dh77pchm92hdikb"><span style="cursor: pointer;"><svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" xmlns="http://www.w3.org/2000/svg"><path style="fill:none;stroke:#ffffff;stroke-width:0.264583;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;" d="M 0.69371456,2.1166666 H 3.5396187"></path></svg> ROOMS</span><ul style="display: block;"><li data-key="home"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <path id="path3110" style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.128568;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers" d="M 2.1166666,0.6755942 1.3764382,1.2733867 0.63620985,1.8711792 H 1.094196 V 3.4357827 H 3.1391372 V 1.8711792 H 3.5971234 L 2.856895,1.2733867 Z"></path> <rect style="fill:#9c9c9c;fill-opacity:1;stroke:none;stroke-width:0.150738;stroke-linejoin:bevel;paint-order:stroke fill markers" id="rect12310" width="0.49860835" height="0.72685415" x="2.2512157" y="2.7089283"></rect> <rect style="fill:#9c9c9c;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;paint-order:stroke fill markers" id="rect13248" width="0.47124618" height="0.46280029" x="1.540359" y="1.9300244"></rect> </svg> Testing Home Room</span><ul style="display: block;"><li data-key="player"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <g id="layer1" style="fill:#ffffff;fill-opacity:1;stroke:none" transform="matrix(0.74013018,0,0,0.74013018,0.55005776,0.55005778)"> <g aria-label="G" id="text147" style="font-weight:bold;font-size:5.4836px;font-family:'DejaVu Sans';-inkscape-font-specification:'DejaVu Sans Bold';fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.931837;stroke-linecap:round;stroke-linejoin:round"> <path id="path1202" style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.245993;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers" d="M 2.1154655,0.29958256 A 0.95769183,0.95769183 0 0 0 1.157917,1.2576116 0.95769183,0.95769183 0 0 0 1.5470861,2.0268214 C 1.0473631,2.1507604 0.63085688,2.4696209 0.63085688,3.1299481 V 3.9337508 H 3.6024763 V 3.1299481 c 0,-0.6590471 -0.4175177,-0.9788423 -0.9176706,-1.1031267 A 0.95769183,0.95769183 0 0 0 3.0734944,1.2576116 0.95769183,0.95769183 0 0 0 2.1154655,0.29958256 Z"></path> </g> </g> </svg> </span><ul style="display: none;"><li data-key="j0j70z5382m91nuded"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <text xml:space="preserve" style="font-weight:bold;font-size:3.45983px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0126139;stroke-linejoin:bevel;paint-order:stroke fill markers" x="1.644399" y="3.3846965" id="text21025"><tspan id="tspan21023" style="stroke-width:0.0126139" x="1.644399" y="3.3846965">i</tspan></text> </svg> stats dice</span></li><li data-key="dra3hmv3nnem91nvmgq"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <text xml:space="preserve" style="font-weight:bold;font-size:3.45983px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0126139;stroke-linejoin:bevel;paint-order:stroke fill markers" x="1.644399" y="3.3846965" id="text21025"><tspan id="tspan21023" style="stroke-width:0.0126139" x="1.644399" y="3.3846965">i</tspan></text> </svg> money dice</span></li><li data-key="z9tqbp2st2m91nw9ep"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <text xml:space="preserve" style="font-weight:bold;font-size:3.45983px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0126139;stroke-linejoin:bevel;paint-order:stroke fill markers" x="1.644399" y="3.3846965" id="text21025"><tspan id="tspan21023" style="stroke-width:0.0126139" x="1.644399" y="3.3846965">i</tspan></text> </svg> life roll</span></li><li data-key="z2i2lbhfwxm91nwx9d"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <text xml:space="preserve" style="font-weight:bold;font-size:3.45983px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0126139;stroke-linejoin:bevel;paint-order:stroke fill markers" x="1.644399" y="3.3846965" id="text21025"><tspan id="tspan21023" style="stroke-width:0.0126139" x="1.644399" y="3.3846965">i</tspan></text> </svg> armor roll</span></li><li data-key="2au1o4qznt5m91nxeao"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <text xml:space="preserve" style="font-weight:bold;font-size:3.45983px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0126139;stroke-linejoin:bevel;paint-order:stroke fill markers" x="1.644399" y="3.3846965" id="text21025"><tspan id="tspan21023" style="stroke-width:0.0126139" x="1.644399" y="3.3846965">i</tspan></text> </svg> strength roll</span></li><li data-key="az85m9vwmcbm91nxw20"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <text xml:space="preserve" style="font-weight:bold;font-size:3.45983px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0126139;stroke-linejoin:bevel;paint-order:stroke fill markers" x="1.644399" y="3.3846965" id="text21025"><tspan id="tspan21023" style="stroke-width:0.0126139" x="1.644399" y="3.3846965">i</tspan></text> </svg> intelligence roll</span></li><li data-key="6jdbqtsxpanm91nyncm"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <text xml:space="preserve" style="font-weight:bold;font-size:3.45983px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0126139;stroke-linejoin:bevel;paint-order:stroke fill markers" x="1.644399" y="3.3846965" id="text21025"><tspan id="tspan21023" style="stroke-width:0.0126139" x="1.644399" y="3.3846965">i</tspan></text> </svg> cunning roll</span></li><li data-key="pvzdehgcs28m91nz4ta"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <text xml:space="preserve" style="font-weight:bold;font-size:3.45983px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0126139;stroke-linejoin:bevel;paint-order:stroke fill markers" x="1.644399" y="3.3846965" id="text21025"><tspan id="tspan21023" style="stroke-width:0.0126139" x="1.644399" y="3.3846965">i</tspan></text> </svg> gold roll</span></li><li data-key="3e573l95rtkm91o5dpu"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <text xml:space="preserve" style="font-weight:bold;font-size:3.45983px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0126139;stroke-linejoin:bevel;paint-order:stroke fill markers" x="1.644399" y="3.3846965" id="text21025"><tspan id="tspan21023" style="stroke-width:0.0126139" x="1.644399" y="3.3846965">i</tspan></text> </svg> Life</span></li><li data-key="uonxrshx72rm91o71d3"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <text xml:space="preserve" style="font-weight:bold;font-size:3.45983px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0126139;stroke-linejoin:bevel;paint-order:stroke fill markers" x="1.644399" y="3.3846965" id="text21025"><tspan id="tspan21023" style="stroke-width:0.0126139" x="1.644399" y="3.3846965">i</tspan></text> </svg> max life</span></li><li data-key="kd8qk3jx4vhm91o7sji"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <text xml:space="preserve" style="font-weight:bold;font-size:3.45983px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0126139;stroke-linejoin:bevel;paint-order:stroke fill markers" x="1.644399" y="3.3846965" id="text21025"><tspan id="tspan21023" style="stroke-width:0.0126139" x="1.644399" y="3.3846965">i</tspan></text> </svg> Armor</span></li><li data-key="kcchdhvqojam91o8zat"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <text xml:space="preserve" style="font-weight:bold;font-size:3.45983px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0126139;stroke-linejoin:bevel;paint-order:stroke fill markers" x="1.644399" y="3.3846965" id="text21025"><tspan id="tspan21023" style="stroke-width:0.0126139" x="1.644399" y="3.3846965">i</tspan></text> </svg> Strength</span></li><li data-key="ccowsmp5kc6m91oa4us"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <text xml:space="preserve" style="font-weight:bold;font-size:3.45983px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0126139;stroke-linejoin:bevel;paint-order:stroke fill markers" x="1.644399" y="3.3846965" id="text21025"><tspan id="tspan21023" style="stroke-width:0.0126139" x="1.644399" y="3.3846965">i</tspan></text> </svg> Intelligence</span></li><li data-key="xvpexadit7hm91oas1w"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <text xml:space="preserve" style="font-weight:bold;font-size:3.45983px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0126139;stroke-linejoin:bevel;paint-order:stroke fill markers" x="1.644399" y="3.3846965" id="text21025"><tspan id="tspan21023" style="stroke-width:0.0126139" x="1.644399" y="3.3846965">i</tspan></text> </svg> Cunning</span></li><li data-key="yv26edvaibom91ocqjl"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <text xml:space="preserve" style="font-weight:bold;font-size:3.45983px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0126139;stroke-linejoin:bevel;paint-order:stroke fill markers" x="1.644399" y="3.3846965" id="text21025"><tspan id="tspan21023" style="stroke-width:0.0126139" x="1.644399" y="3.3846965">i</tspan></text> </svg> Gold</span></li><li data-key="player_armed"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <text xml:space="preserve" style="font-weight:bold;font-size:3.45983px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0126139;stroke-linejoin:bevel;paint-order:stroke fill markers" x="1.644399" y="3.3846965" id="text21025"><tspan id="tspan21023" style="stroke-width:0.0126139" x="1.644399" y="3.3846965">i</tspan></text> </svg> armed weapon</span></li><li data-key="experience"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <text xml:space="preserve" style="font-weight:bold;font-size:3.45983px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0126139;stroke-linejoin:bevel;paint-order:stroke fill markers" x="1.644399" y="3.3846965" id="text21025"><tspan id="tspan21023" style="stroke-width:0.0126139" x="1.644399" y="3.3846965">i</tspan></text> </svg> Experience</span></li><li data-key="cur_heal_round"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <text xml:space="preserve" style="font-weight:bold;font-size:3.45983px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0126139;stroke-linejoin:bevel;paint-order:stroke fill markers" x="1.644399" y="3.3846965" id="text21025"><tspan id="tspan21023" style="stroke-width:0.0126139" x="1.644399" y="3.3846965">i</tspan></text> </svg> cur heal round</span></li><li data-key="4yru4bgbvolm91onmxr"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <text xml:space="preserve" style="font-weight:bold;font-size:3.45983px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0126139;stroke-linejoin:bevel;paint-order:stroke fill markers" x="1.644399" y="3.3846965" id="text21025"><tspan id="tspan21023" style="stroke-width:0.0126139" x="1.644399" y="3.3846965">i</tspan></text> </svg> Quest</span></li><li data-key="ym8tqvff76im91ooiy7"><span style="cursor: pointer;"><svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" xmlns="http://www.w3.org/2000/svg"><path style="fill:none;stroke:#ffffff;stroke-width:0.264583;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;" d="M 0.69371456,2.1166666 H 3.5396187"></path></svg> Attack Player</span><ul style="display: none;"><li data-key="tydkk947zvpm91op8ta"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <g id="g17152" transform="rotate(45,2.1018541,2.1105311)"> <rect style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.198799;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" id="rect17051" width="0.73135507" height="2.6537266" x="1.7509891" y="0.90471673"></rect> <path style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" id="path17125" d="m 2.1166666,0.3620086 0.1814879,0.31434643 0.181488,0.31434643 -0.3629759,-1e-8 -0.362976,-10e-9 0.181488,-0.31434641 z" transform="translate(7.521059e-8,-0.07733837)"></path> <rect style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" id="rect17127" width="2.029305" height="0.49957958" x="1.1020142" y="2.3346605"></rect> </g> </svg> Attack</span><ul style="display: none;"><li data-key="82t6lun7um4m91opqwu"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <text xml:space="preserve" style="font-weight:bold;font-size:3.45983px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0126139;stroke-linejoin:bevel;paint-order:stroke fill markers" x="1.644399" y="3.3846965" id="text21025"><tspan id="tspan21023" style="stroke-width:0.0126139" x="1.644399" y="3.3846965">i</tspan></text> </svg> target</span></li></ul></li></ul></li><li data-key="long-sword_01"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" sodipodi:docname="object_ico.svg" inkscape:version="1.2.2 (b0a8486, 2022-12-01)" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <sodipodi:namedview id="namedview38" pagecolor="#505050" bordercolor="#eeeeee" borderopacity="1" inkscape:showpageshadow="0" inkscape:pageopacity="0" inkscape:pagecheckerboard="0" inkscape:deskcolor="#505050" showgrid="false" inkscape:zoom="42.382213" inkscape:cx="4.1408881" inkscape:cy="8.0104359" inkscape:window-width="1916" inkscape:window-height="1074" inkscape:window-x="0" inkscape:window-y="0" inkscape:window-maximized="1" inkscape:current-layer="svg5" showguides="true"> <sodipodi:guide position="2.1166666,4.4412308" orientation="16.206024,0" id="guide328" inkscape:locked="false"></sodipodi:guide> <sodipodi:guide position="2.3785036,2.3187412" orientation="0,-1" id="guide334" inkscape:locked="false"></sodipodi:guide> <sodipodi:guide position="2.9715688,0.78298396" orientation="0,-1" id="guide336" inkscape:locked="false"></sodipodi:guide> <sodipodi:guide position="0.69898409,1.7050026" orientation="1,0" id="guide338" inkscape:locked="false"></sodipodi:guide> <sodipodi:guide position="3.5343492,2.7683155" orientation="1,0" id="guide340" inkscape:locked="false"></sodipodi:guide> <sodipodi:guide position="3.5343493,2.9508443" orientation="0,-1" id="guide352" inkscape:locked="false"></sodipodi:guide> <sodipodi:guide position="3.5343492,1.4150872" orientation="0,-1" id="guide354" inkscape:locked="false"></sodipodi:guide> <sodipodi:guide position="2.4534171,3.5829476" orientation="0,-1" id="guide1047" inkscape:locked="false"></sodipodi:guide> </sodipodi:namedview> <defs id="defs2"></defs> <path style="fill:#ffffff;stroke:none;stroke-width:0.185208;stroke-linecap:round;stroke-dasharray:none;paint-order:stroke fill markers;fill-opacity:1" d="M 2.1166666,0.65038564 3.5343491,1.282489 v 1.5357571 l -1.4176825,0.63832 -1.4176825,-0.63832 V 1.282489 Z" id="path1063"></path> <path style="fill:#ffffff;stroke:none;stroke-width:0.185208;stroke-linecap:round;stroke-dasharray:none;paint-order:stroke fill markers;fill-opacity:1" d="M 2.1166666,0.65038564 3.5343491,1.282489 v 1.5357571 l -1.4176825,0.63832 -1.4176825,-0.63832 V 1.282489 Z" id="path2373"></path> <path style="fill:none;fill-opacity:1;stroke:#8e8e8e;stroke-width:0.18520833;stroke-linecap:butt;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers;stroke-linejoin:bevel" d="M 0.6989841,1.282489 2.1166666,1.9145921 3.5343491,1.282489" id="path5018"></path> <path style="fill:none;fill-opacity:1;stroke:#8e8e8e;stroke-width:0.185208;stroke-linecap:butt;stroke-linejoin:bevel;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers" d="M 2.1166666,1.9145921 V 3.4503492" id="path6370"></path> </svg> Long Sword</span><ul style="display: none;"><li data-key="74yr0t7hrm91ouzn5"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <text xml:space="preserve" style="font-weight:bold;font-size:3.45983px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0126139;stroke-linejoin:bevel;paint-order:stroke fill markers" x="1.644399" y="3.3846965" id="text21025"><tspan id="tspan21023" style="stroke-width:0.0126139" x="1.644399" y="3.3846965">i</tspan></text> </svg> Damage</span></li><li data-key="79liampktaem91ow6sv"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <text xml:space="preserve" style="font-weight:bold;font-size:3.45983px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0126139;stroke-linejoin:bevel;paint-order:stroke fill markers" x="1.644399" y="3.3846965" id="text21025"><tspan id="tspan21023" style="stroke-width:0.0126139" x="1.644399" y="3.3846965">i</tspan></text> </svg> friendly name</span></li></ul></li></ul></li><li data-key="3yiz09d87evm92hgek0"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <rect style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.165345;stroke-linejoin:bevel;paint-order:stroke fill markers" id="rect15482" width="1.9418752" height="2.6706309" x="1.1457291" y="0.78135115"></rect> <path style="fill:none;fill-opacity:1;stroke:#939393;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" d="M 1.5488185,1.5004032 H 2.6845148" id="path15542"></path> <path style="fill:none;fill-opacity:1;stroke:#939393;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" d="M 1.5488185,2.1166666 H 2.6845148" id="path16407"></path> </svg> Enter Message</span></li><li data-key="n1oy3odne3dm92hiusl"><span style="cursor: pointer;"><svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" xmlns="http://www.w3.org/2000/svg"><path style="fill:none;stroke:#ffffff;stroke-width:0.264583;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;" d="M 0.69371456,2.1166666 H 3.5396187"></path></svg> Look</span><ul style="display: none;"><li data-key="gos1iqg1rgqm92hjg25"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <rect style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.165345;stroke-linejoin:bevel;paint-order:stroke fill markers" id="rect15482" width="1.9418752" height="2.6706309" x="1.1457291" y="0.78135115"></rect> <path style="fill:none;fill-opacity:1;stroke:#939393;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" d="M 1.5488185,1.5004032 H 2.6845148" id="path15542"></path> <path style="fill:none;fill-opacity:1;stroke:#939393;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" d="M 1.5488185,2.1166666 H 2.6845148" id="path16407"></path> </svg> Look Msg</span></li></ul></li><li data-key="xhxecxcl42lm92iow8c"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <path style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" id="path1135" d="m 2.1166666,-0.50851178 0.3327753,0.5763839 0.3327754,0.57638386 -0.6655507,-7e-8 -0.6655508,4e-8 0.3327754,-0.57638383 z" transform="matrix(0.84700546,0,0,0.84700546,0.32383842,0.7832153)"></path> <path style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" id="path1617" d="m 2.1166666,-0.50851178 0.3327753,0.5763839 0.3327754,0.57638386 -0.6655507,-7e-8 -0.6655508,4e-8 0.3327754,-0.57638383 z" transform="matrix(0,0.84700546,-0.84700546,0,3.464608,0.33165152)"></path> <path style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" id="path1619" d="m 2.1166666,-0.50851178 0.3327753,0.5763839 0.3327754,0.57638386 -0.6655507,-7e-8 -0.6655508,4e-8 0.3327754,-0.57638383 z" transform="matrix(-0.84700546,0,0,-0.84700546,3.9016279,3.460076)"></path> <path style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" id="path1621" d="m 2.1166666,-0.50851178 0.3327753,0.5763839 0.3327754,0.57638386 -0.6655507,-7e-8 -0.6655508,4e-8 0.3327754,-0.57638383 z" transform="matrix(0,-0.84700546,0.84700546,0,0.76085834,3.9116397)"></path> </svg> Navigation</span><ul style="display: block;"><li data-key="tr9whrpn83m92ipps2"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <rect style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.165345;stroke-linejoin:bevel;paint-order:stroke fill markers" id="rect15482" width="1.9418752" height="2.6706309" x="1.1457291" y="0.78135115"></rect> <path style="fill:none;fill-opacity:1;stroke:#939393;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" d="M 1.5488185,1.5004032 H 2.6845148" id="path15542"></path> <path style="fill:none;fill-opacity:1;stroke:#939393;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" d="M 1.5488185,2.1166666 H 2.6845148" id="path16407"></path> </svg> Nav Msg</span></li></ul></li><li data-key="r7eqlu5a1om92itw47"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <path style="fill:none;fill-opacity:1;stroke:#ffffff;stroke-width:0.185208;stroke-linejoin:bevel;paint-order:stroke fill markers;stroke-opacity:1" d="M 1.952999,2.9316113 H 3.5563688" id="path19525"></path> <text xml:space="preserve" style="font-weight:bold;font-size:3.24209px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.0118201;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" x="0.22496246" y="3.1849368" id="text20814"><tspan id="tspan20812" style="stroke-width:0.0118201" x="0.22496246" y="3.1849368">+</tspan></text> </svg> Look Inj</span></li><li data-key="33qw3awzi5am95dh8zu"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <path style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;paint-order:stroke fill markers" id="path19523" d="m 1.275162,2.0133541 -0.7057629,0.4074724 -0.70576287,0.4074724 3e-8,-0.8149449 -3e-8,-0.8149447 0.70576291,0.4074724 z" transform="translate(0.61360234,0.10331256)"></path> <path style="fill:none;fill-opacity:1;stroke:#ffffff;stroke-width:0.185208;stroke-linejoin:bevel;paint-order:stroke fill markers;stroke-opacity:1" d="M 1.952999,2.9316113 H 3.5563688" id="path19525"></path> </svg> GoldRoom Door</span><ul style="display: block;"><li data-key="k3gzbw6wmpqm95difm9"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <path style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" id="path16515" d="m 2.8393816,2.1992004 -1.0961629,0.6328699 -1.09616284,0.6328699 0,-1.2657398 0,-1.26573985 1.09616294,0.63286995 z" transform="translate(0.37344791,-0.08253377)"></path> </svg> GoldRoomDoor Action</span></li></ul></li></ul></li><li data-key="gold_room"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <path id="path3110" style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.128568;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers" d="M 2.1166666,0.6755942 1.3764382,1.2733867 0.63620985,1.8711792 H 1.094196 V 3.4357827 H 3.1391372 V 1.8711792 H 3.5971234 L 2.856895,1.2733867 Z"></path> <rect style="fill:#9c9c9c;fill-opacity:1;stroke:none;stroke-width:0.150738;stroke-linejoin:bevel;paint-order:stroke fill markers" id="rect12310" width="0.49860835" height="0.72685415" x="2.2512157" y="2.7089283"></rect> <rect style="fill:#9c9c9c;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;paint-order:stroke fill markers" id="rect13248" width="0.47124618" height="0.46280029" x="1.540359" y="1.9300244"></rect> </svg> Gold Room</span><ul style="display: none;"><li data-key="csgxp4xttqjm95dfyhv"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <rect style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.165345;stroke-linejoin:bevel;paint-order:stroke fill markers" id="rect15482" width="1.9418752" height="2.6706309" x="1.1457291" y="0.78135115"></rect> <path style="fill:none;fill-opacity:1;stroke:#939393;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" d="M 1.5488185,1.5004032 H 2.6845148" id="path15542"></path> <path style="fill:none;fill-opacity:1;stroke:#939393;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" d="M 1.5488185,2.1166666 H 2.6845148" id="path16407"></path> </svg> enter message</span></li></ul></li></ul></li><li data-key="zfofgknktfkm92iqoxe"><span style="cursor: pointer;"><svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" xmlns="http://www.w3.org/2000/svg"><path style="fill:none;stroke:#ffffff;stroke-width:0.264583;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;" d="M 0.69371456,2.1166666 H 3.5396187"></path></svg> INJECTIONS</span><ul style="display: none;"><li data-key="inj_look"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <path style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;paint-order:stroke fill markers" id="path19523" d="m 1.275162,2.0133541 -0.7057629,0.4074724 -0.70576287,0.4074724 3e-8,-0.8149449 -3e-8,-0.8149447 0.70576291,0.4074724 z" transform="translate(0.61360234,0.10331256)"></path> <path style="fill:none;fill-opacity:1;stroke:#ffffff;stroke-width:0.185208;stroke-linejoin:bevel;paint-order:stroke fill markers;stroke-opacity:1" d="M 1.952999,2.9316113 H 3.5563688" id="path19525"></path> </svg> Inj Look</span><ul style="display: none;"><li data-key="xs69bo34pndm92isgbk"><span style="cursor: pointer;"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <g aria-label="!" id="text18965" style="font-weight:bold;font-size:4.37606px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0159544;stroke-linejoin:bevel;paint-order:stroke fill markers"> <path d="m 1.9000508,2.5849076 h 0.437606 L 2.3989217,0.57629608 H 1.838786 Z m 0.214427,1.0721347 c 0.223179,0 0.3763411,-0.1619142 0.3763411,-0.3719651 0,-0.223179 -0.1531621,-0.3850933 -0.3763411,-0.3850933 -0.2231791,0 -0.3719651,0.1619143 -0.3719651,0.3850933 0,0.2100509 0.148786,0.3719651 0.3719651,0.3719651 z" id="path19468"></path> </g> </svg> Inj Look Action</span></li></ul></li></ul></li></ul></div>
        <div id="details" style="display: block;">
                <p><strong>Element Type:</strong><span id="element-type-parent"><span id="element-type" class="link">move</span></span></p>
                <p><strong>Element Key:</strong> <span id="element-key" class="link">k3gzbw6wmpqm95difm9</span></p>
                <p><strong>Name:</strong> <span id="element-name" class="link">GoldRoomDoor Action</span></p>
                <p><strong>Parent Key:</strong> <select id="parentSelect"><option value="null">No Parent</option><option value="game">Sample Game</option><option value="player"></option><option value="9wh0ai7glyhm8zq92fn">error</option><option value="nyoy47hnhtgm8zqaoi8">die message</option><option value="ym8tqvff76im91ooiy7">Attack Player</option><option value="tydkk947zvpm91op8ta">Attack</option><option value="long-sword_01">Long Sword</option><option value="3ielqbe2ltm91oyuf9">Global</option><option value="69lyn6u2u6nm91p0qv7">Title</option><option value="vl9tfy7wmkm91p1baj">show game title</option><option value="du2fxwfitpum91p248p">Stats</option><option value="6tqadr9itmpm91p2w5t">show stats</option><option value="0e9uq8d1xdim91p5y52">Inventory</option><option value="pohxz1iocgm91p6pom">show inventory</option><option value="w97g79kzvugm91p7k05">Arm</option><option value="51w1x5oxgt3m91p86i4">set armed weapon</option><option value="at73dh77pchm92hdikb">ROOMS</option><option value="home">Testing Home Room</option><option value="3yiz09d87evm92hgek0">Enter Message</option><option value="n1oy3odne3dm92hiusl">Look</option><option value="gos1iqg1rgqm92hjg25">Look Msg</option><option value="xhxecxcl42lm92iow8c">Navigation</option><option value="tr9whrpn83m92ipps2">Nav Msg</option><option value="zfofgknktfkm92iqoxe">INJECTIONS</option><option value="inj_look">Inj Look</option><option value="xs69bo34pndm92isgbk">Inj Look Action</option><option value="r7eqlu5a1om92itw47">Look Inj</option><option value="suli02fs0cm92js21q">Start Screen</option><option value="gold_room">Gold Room</option><option value="csgxp4xttqjm95dfyhv">enter message</option><option value="33qw3awzi5am95dh8zu" selected="">GoldRoom Door</option></select></p>
                <p><strong>Syntax:</strong> <span id="syntax-caption" class="link">Click to Edit</span></p>
                <p><strong>Logic:</strong> <span id="logic-field" class="link">gold_room</span></p>
                <p><strong>Output:</strong> <span id="output-field" class="link">You have decided to test receiving money.</span></p>
                <p><strong>Tags:</strong> <span id="tags-field" class="link">[player]</span></p>
                <p><strong>Repeat:</strong> <span id="repeat-field-parent"><span id="repeat-field" class="link">Click to Edit</span><span></span></span></p>
                <p><strong>Active:</strong> <span><input id="element-active" type="checkbox" checked=""></span></p>
                <p><strong>Sort:</strong> <span id="sort-field" class="link">Click to Edit</span></p>
                <br>
                <p><span id="delete-element" class="link">Delete</span></p>
            </div>
        <div id="editor-container" style="display: none;">
                <div id="editor-close">X</div>
                <textarea id="editor"></textarea>
            </div>
    </div>
    <div id="admin-input-container" style="display: flex;">
        <input type="text" id="admin-input">
    </div>
    
    <script>
        let database = [
  {"ElementType":"game","ElementKey":"game","Name":"Sample Game","ParentKey":null,"Syntax":"","Logic":"","Output":"","Tags":"","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"player","ElementKey":"player","Name":"","ParentKey":"home","Syntax":"","Logic":"","Output":"","Tags":"","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"attribute","ElementKey":"pf4wcjaqs9jm8zq6awm","Name":"admin pass","ParentKey":"game","Syntax":"","Logic":"","Output":"admin","Tags":"!_adminpass","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"","ElementKey":"9wh0ai7glyhm8zq92fn","Name":"error","ParentKey":"game","Syntax":"","Logic":"","Output":"I don't understand what you are trying to do.","Tags":"!_error","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"message","ElementKey":"nyoy47hnhtgm8zqaoi8","Name":"die message","ParentKey":"game","Syntax":"","Logic":"","Output":"You have died.","Tags":"!_die","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},
  {"ElementType":"attribute","ElementKey":"j0j70z5382m91nuded","Name":"stats dice","ParentKey":"player","Syntax":"","Logic":"","Output":"[rand:3|5]","Tags":"stats_dice","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"attribute","ElementKey":"dra3hmv3nnem91nvmgq","Name":"money dice","ParentKey":"player","Syntax":"","Logic":"","Output":"[rand:4|6]","Tags":"money_dice","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"attribute","ElementKey":"z9tqbp2st2m91nw9ep","Name":"life roll","ParentKey":"player","Syntax":"","Logic":"","Output":"[rand:<<[self]((stats_dice))>>|6]","Tags":"life_roll","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"attribute","ElementKey":"z2i2lbhfwxm91nwx9d","Name":"armor roll","ParentKey":"player","Syntax":"","Logic":"","Output":"[rand:<<[self]((stats_dice))>>|6]","Tags":"armor_roll","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"attribute","ElementKey":"2au1o4qznt5m91nxeao","Name":"strength roll","ParentKey":"player","Syntax":"","Logic":"","Output":"[rand:<<[self]((stats_dice))>>|5]","Tags":"strength_roll","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},
  {"ElementType":"attribute","ElementKey":"az85m9vwmcbm91nxw20","Name":"intelligence roll","ParentKey":"player","Syntax":"","Logic":"","Output":"[rand:<<[self]((stats_dice))>>|5]","Tags":"intelligence_roll","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"attribute","ElementKey":"6jdbqtsxpanm91nyncm","Name":"cunning roll","ParentKey":"player","Syntax":"","Logic":"","Output":"[rand:<<[self]((stats_dice))>>|5]","Tags":"cunning_roll","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"attribute","ElementKey":"pvzdehgcs28m91nz4ta","Name":"gold roll","ParentKey":"player","Syntax":"","Logic":"","Output":"[rand:<<[self]((money_dice))>>|9]","Tags":"gold_roll","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"attribute","ElementKey":"3e573l95rtkm91o5dpu","Name":"Life","ParentKey":"player","Syntax":"","Logic":"","Output":"[roll:(8)<<[self]((life_roll))>>d6]","Tags":"stats|life","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"attribute","ElementKey":"uonxrshx72rm91o71d3","Name":"max life","ParentKey":"player","Syntax":"","Logic":"","Output":"player((life))","Tags":"maxlife","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},
  {"ElementType":"attribute","ElementKey":"kd8qk3jx4vhm91o7sji","Name":"Armor","ParentKey":"player","Syntax":"","Logic":"","Output":"[roll:(6)<<[self]((armor_roll))>>d6+3]","Tags":"stats|armor","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"attribute","ElementKey":"kcchdhvqojam91o8zat","Name":"Strength","ParentKey":"player","Syntax":"","Logic":"","Output":"[roll:(6)<<[self]((strength_roll))>>d6]","Tags":"stats","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"attribute","ElementKey":"ccowsmp5kc6m91oa4us","Name":"Intelligence","ParentKey":"player","Syntax":"","Logic":"","Output":"[roll:(6)<<[self]((intelligence_roll))>>d6]","Tags":"stats","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"attribute","ElementKey":"xvpexadit7hm91oas1w","Name":"Cunning","ParentKey":"player","Syntax":"","Logic":"","Output":"[roll:(6)<<[self]((cunning_roll))>>d6]","Tags":"stats","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"attribute","ElementKey":"yv26edvaibom91ocqjl","Name":"Gold","ParentKey":"player","Syntax":"","Logic":"","Output":"[roll:<<[self]((gold_roll))>>d8]","Tags":"stats|gold","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},
  {"ElementType":"attribute","ElementKey":"player_armed","Name":"armed weapon","ParentKey":"player","Syntax":"","Logic":"","Output":"long-sword_01","Tags":"armed|stats|name","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"attribute","ElementKey":"experience","Name":"Experience","ParentKey":"player","Syntax":"","Logic":"","Output":"0","Tags":"experience|stats","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"attribute","ElementKey":"cur_heal_round","Name":"cur heal round","ParentKey":"player","Syntax":"","Logic":"","Output":"0","Tags":"","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"attribute","ElementKey":"4yru4bgbvolm91onmxr","Name":"Quest","ParentKey":"player","Syntax":"","Logic":"","Output":"","Tags":"stats|quest","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"attackplayer","ElementKey":"ym8tqvff76im91ooiy7","Name":"Attack Player","ParentKey":"player","Syntax":"","Logic":"","Output":"","Tags":"","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},
  {"ElementType":"attack","ElementKey":"tydkk947zvpm91op8ta","Name":"Attack","ParentKey":"ym8tqvff76im91ooiy7","Syntax":"","Logic":"","Output":"","Tags":"","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"attribute","ElementKey":"82t6lun7um4m91opqwu","Name":"target","ParentKey":"tydkk947zvpm91op8ta","Syntax":"","Logic":"","Output":"[player]","Tags":"target","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"object","ElementKey":"long-sword_01","Name":"Long Sword","ParentKey":"player","Syntax":"/\\b(.*your .*sword|.*sword)\\b/","Logic":"","Output":"","Tags":"inventory","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"attribute","ElementKey":"74yr0t7hrm91ouzn5","Name":"Damage","ParentKey":"long-sword_01","Syntax":"","Logic":"[rand:4|12]","Output":"","Tags":"damage","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"attribute","ElementKey":"79liampktaem91ow6sv","Name":"friendly name","ParentKey":"long-sword_01","Syntax":"","Logic":"","Output":"a Long Sword","Tags":"title","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},
  {"ElementType":"global","ElementKey":"3ielqbe2ltm91oyuf9","Name":"Global","ParentKey":null,"Syntax":"","Logic":"","Output":"","Tags":"","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"input","ElementKey":"69lyn6u2u6nm91p0qv7","Name":"Title","ParentKey":"3ielqbe2ltm91oyuf9","Syntax":"/\\b(title)\\b/","Logic":"","Output":"","Tags":"","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"","ElementKey":"vl9tfy7wmkm91p1baj","Name":"show game title","ParentKey":"69lyn6u2u6nm91p0qv7","Syntax":"","Logic":"game_title","Output":"","Tags":"key","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"input","ElementKey":"du2fxwfitpum91p248p","Name":"Stats","ParentKey":"3ielqbe2ltm91oyuf9","Syntax":"/\\b(stats)\\b/","Logic":"","Output":"","Tags":"","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"action","ElementKey":"6tqadr9itmpm91p2w5t","Name":"show stats","ParentKey":"du2fxwfitpum91p248p","Syntax":"","Logic":"[player]((stats))","Output":"Stats:","Tags":"list","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},
  {"ElementType":"input","ElementKey":"0e9uq8d1xdim91p5y52","Name":"Inventory","ParentKey":"3ielqbe2ltm91oyuf9","Syntax":"/\\b(inventory|inv)\\b/","Logic":"","Output":"","Tags":"","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"","ElementKey":"pohxz1iocgm91p6pom","Name":"show inventory","ParentKey":"0e9uq8d1xdim91p5y52","Syntax":"","Logic":"[player]((inventory))","Output":"Inventory:","Tags":"list","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"input","ElementKey":"w97g79kzvugm91p7k05","Name":"Arm","ParentKey":"3ielqbe2ltm91oyuf9","Syntax":"/\\b(arm .*)\\b/","Logic":"","Output":"","Tags":"","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"set","ElementKey":"51w1x5oxgt3m91p86i4","Name":"set armed weapon","ParentKey":"w97g79kzvugm91p7k05","Syntax":"","Logic":"player_armed","Output":"","Tags":"arm","Repeat":"","RepeatIndex":"","Template":"","Active":"true","Sort":""},{"ElementType":"","ElementKey":"at73dh77pchm92hdikb","Name":"ROOMS","ParentKey":null,"Syntax":"","Logic":"","Output":"","Tags":"","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},
  {"ElementType":"room","ElementKey":"home","Name":"Testing Home Room","ParentKey":"at73dh77pchm92hdikb","Syntax":"","Logic":"","Output":"","Tags":"","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"enter_message","ElementKey":"3yiz09d87evm92hgek0","Name":"Enter Message","ParentKey":"home","Syntax":"","Logic":"","Output":"Welcome to the WorldWeaver Testing Game.\nTo enter a test room simply enter its name.\n(No need to say \"go to\").\n","Tags":"","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"look","ElementKey":"n1oy3odne3dm92hiusl","Name":"Look","ParentKey":"home","Syntax":"","Logic":"","Output":"","Tags":"","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"message","ElementKey":"gos1iqg1rgqm92hjg25","Name":"Look Msg","ParentKey":"n1oy3odne3dm92hiusl","Syntax":"","Logic":"","Output":"You are in the testing room.\nTo enter a test room simply enter its name.\n(No need to say \"go to\").\n","Tags":"","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"navigation","ElementKey":"xhxecxcl42lm92iow8c","Name":"Navigation","ParentKey":"home","Syntax":"","Logic":"","Output":"","Tags":"look|enter_message","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},
  {"ElementType":"message","ElementKey":"tr9whrpn83m92ipps2","Name":"Nav Msg","ParentKey":"xhxecxcl42lm92iow8c","Syntax":"","Logic":"","Output":"\n\nGo to Time Room (first)\nGo to Gold Room.\nGo to Traveling.\nGo to Taking and Putting.\nGo to Fight.\nGo to Weapon Arming.\nGo to Npc Follow.\nGo to Npc Path.\nGo to Tests Room.\nGo to Output Logic Test 01.\nGo to Dev Note.\nGo to Conversation Room.\nGo to Die Room.\nGo to Spawn Room\nGo to Ammo Room","Tags":"","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"","ElementKey":"zfofgknktfkm92iqoxe","Name":"INJECTIONS","ParentKey":null,"Syntax":"","Logic":"","Output":"","Tags":"","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"input","ElementKey":"inj_look","Name":"Inj Look","ParentKey":"zfofgknktfkm92iqoxe","Syntax":"\\b(look|l)\\b","Logic":"","Output":"","Tags":"","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"action","ElementKey":"xs69bo34pndm92isgbk","Name":"Inj Look Action","ParentKey":"inj_look","Syntax":"","Logic":"look","Output":"","Tags":"type|room","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"!_start","ElementKey":"suli02fs0cm92js21q","Name":"Start Screen","ParentKey":"game","Syntax":"","Logic":"","Output":"Welcome to\n\n\n▓█████▄  ▄▄▄       ██▀███   ██ ▄█▀         \n▒██▀ ██▌▒████▄    ▓██ ▒ ██▒ ██▄█▒          \n░██   █▌▒██  ▀█▄  ▓██ ░▄█ ▒▓███▄░          \n░▓█▄   ▌░██▄▄▄▄██ ▒██▀▀█▄  ▓██ █▄          \n░▒████▓  ▓█   ▓██▒░██▓ ▒██▒▒██▒ █▄         \n ▒▒▓  ▒  ▒▒   ▓▒█░░ ▒▓ ░▒▓░▒ ▒▒ ▓▒         \n ░ ▒  ▒   ▒   ▒▒ ░  ░▒ ░ ▒░░ ░▒ ▒░         \n ░ ░  ░   ░   ▒     ░░   ░ ░ ░░ ░          \n   ░          ░  ░   ░     ░  ░            \n ░                                         \n █     █░ ▒█████   ██▀███   ██▓    ▓█████▄ \n▓█░ █ ░█░▒██▒  ██▒▓██ ▒ ██▒▓██▒    ▒██▀ ██▌\n▒█░ █ ░█ ▒██░  ██▒▓██ ░▄█ ▒▒██░    ░██   █▌\n░█░ █ ░█ ▒██   ██░▒██▀▀█▄  ▒██░    ░▓█▄   ▌\n░░██▒██▓ ░ ████▓▒░░██▓ ▒██▒░██████▒░▒████▓ \n░ ▓░▒ ▒  ░ ▒░▒░▒░ ░ ▒▓ ░▒▓░░ ▒░▓  ░ ▒▒▓  ▒ \n  ▒ ░ ░    ░ ▒ ▒░   ░▒ ░ ▒░░ ░ ▒  ░ ░ ▒  ▒ \n  ░   ░  ░ ░ ░ ▒    ░░   ░   ░ ░    ░ ░  ░ \n    ░        ░ ░     ░         ░  ░   ░    \n                                    ░  \n\n","Tags":"","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},
  {"ElementType":"attribute","ElementKey":"n4n2fxgt2tm930w294","Name":"File Name","ParentKey":"game","Syntax":"","Logic":"","Output":"sample","Tags":"!_filename","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"room","ElementKey":"gold_room","Name":"Gold Room","ParentKey":"at73dh77pchm92hdikb","Syntax":"","Logic":"","Output":"","Tags":"","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"enter_message","ElementKey":"csgxp4xttqjm95dfyhv","Name":"enter message","ParentKey":"gold_room","Syntax":"","Logic":"","Output":"Welcome to the Gold Room.\n","Tags":"","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"input","ElementKey":"33qw3awzi5am95dh8zu","Name":"GoldRoom Door","ParentKey":"home","Syntax":"\\b(gold room)\\b","Logic":"","Output":"","Tags":"","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"move","ElementKey":"k3gzbw6wmpqm95difm9","Name":"GoldRoomDoor Action","ParentKey":"33qw3awzi5am95dh8zu","Syntax":"","Logic":"gold_room","Output":"You have decided to test receiving money.\n\n","Tags":"[player]","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},
  {"ElementType":"look","ElementKey":"byhgzjzj7qvm99nqh7r","Name":"Look","ParentKey":"gold_room","Syntax":"","Logic":"","Output":"","Tags":"","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"message","ElementKey":"9o7qgeoftqfm99nqsum","Name":"Look Message","ParentKey":"byhgzjzj7qvm99nqh7r","Syntax":"","Logic":"","Output":"You look around.\nYou are in a small room.\n","Tags":"","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"input","ElementKey":"dws4anifpxm99nruo4","Name":"Look Input","ParentKey":"gold_room","Syntax":"\\b(look|l)\\b","Logic":"","Output":"","Tags":"","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"action","ElementKey":"vzg2gexfy2qm99nsado","Name":"Look Action","ParentKey":"dws4anifpxm99nruo4","Syntax":"","Logic":"look","Output":"","Tags":"type|room","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"input","ElementKey":"fyf8b0e469mm99op8iu","Name":"Home Input","ParentKey":"gold_room","Syntax":"\\b(home)\\b","Logic":"","Output":"","Tags":"","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},
  {"ElementType":"move","ElementKey":"m8p6rq3wzjgm99oruk2","Name":"HomeDoor Action","ParentKey":"fyf8b0e469mm99op8iu","Syntax":"","Logic":"home","Output":"","Tags":"[player]","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"navigation","ElementKey":"obo9905ejlam99otgpl","Name":"Navigation","ParentKey":"gold_room","Syntax":"","Logic":"","Output":"","Tags":"look|enter_message","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"message","ElementKey":"uri9nmp4ufam99ots0h","Name":"Nav Msg","ParentKey":"obo9905ejlam99otgpl","Syntax":"","Logic":"","Output":"\n\nYou can return home using:\nhome","Tags":"","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"input","ElementKey":"q359kjev8q9m9b4b60y","Name":"Look Input","ParentKey":"home","Syntax":"\\b(look|l)\\b","Logic":"","Output":"","Tags":"","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"action","ElementKey":"m5ypte6dvlm9b4bm9u","Name":"Look Action","ParentKey":"q359kjev8q9m9b4b60y","Syntax":"","Logic":"look","Output":"","Tags":"type|room","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},
  {"ElementType":"object","ElementKey":"zcfyy2e69fm9b4ht2r","Name":"Gold Coin","ParentKey":"gold_room","Syntax":"","Logic":"","Output":"","Tags":"","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"attribute","ElementKey":"4fecftfhp3vm9b4jon6","Name":"moved","ParentKey":"zcfyy2e69fm9b4ht2r","Syntax":"","Logic":"","Output":"false","Tags":"moved","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"look","ElementKey":"awmyn3yxzydm9b4l1i0","Name":"Look","ParentKey":"zcfyy2e69fm9b4ht2r","Syntax":"","Logic":"","Output":"","Tags":"","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"message","ElementKey":"j5qqe3os2om9b4lkog","Name":"Look Message","ParentKey":"awmyn3yxzydm9b4l1i0","Syntax":"","Logic":"","Output":"\nYou see a gold coin.","Tags":"","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"enter_message","ElementKey":"ntrf9qy5mgm9bt126v","Name":"enter message","ParentKey":"zcfyy2e69fm9b4ht2r","Syntax":"","Logic":"","Output":"You see a gold coin.\n","Tags":"","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},
  {"ElementType":"logic","ElementKey":"r694vnch6sm9cin5d3","Name":"Moved Logic","ParentKey":"awmyn3yxzydm9b4l1i0","Syntax":"","Logic":"?[self]((moved)) = 'false'","Output":"","Tags":"","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"input","ElementKey":"xft1rox6b1rm9gt5pnn","Name":"Take Coin","ParentKey":"zcfyy2e69fm9b4ht2r","Syntax":"\\b(take gold coin|take coin)\\b","Logic":"","Output":"","Tags":"","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"move","ElementKey":"j2oimcm7sydm9gt90pb","Name":"Take Move","ParentKey":"xft1rox6b1rm9gt5pnn","Syntax":"","Logic":"limbo","Output":"","Tags":"[self]","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""},{"ElementType":"set","ElementKey":"zg519drfg1km9gteyn6","Name":"Take Action","ParentKey":"xft1rox6b1rm9gt5pnn","Syntax":"","Logic":"[player]((gold))","Output":"+=1","Tags":"","Repeat":"","RepeatIndex":"0","Template":"","Active":"true","Sort":""}
];
        
        let currentParent = null;
        let newElementParentKey = "";
        let expandedNodes = new Set();

        // !@! icons
        // Icons
            const icoGame = `<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2" /> <g aria-label="G" id="text8654" style="font-weight:bold;font-size:3.8988px;font-family:'ITC Bauhaus';-inkscape-font-specification:'ITC Bauhaus Bold';fill:none;stroke:#8e8e8e;stroke-width:0.0142143;stroke-linejoin:bevel;paint-order:stroke fill markers"> <path d="m 2.2882142,3.5085379 c 0.4054751,0 0.7563671,-0.1208628 1.0448783,-0.3586896 V 1.9490179 H 2.1790478 v 0.428868 h 0.6666947 v 0.5770224 c -0.136458,0.070178 -0.3041063,0.1130652 -0.4912487,0.1130652 -0.565326,0 -0.9279144,-0.3781836 -0.9279144,-0.9824976 0,-0.58482 0.3391956,-0.9162179 0.9396108,-0.9162179 0.2378268,0 0.5146415,0.050684 0.7251767,0.1247616 L 3.2317237,0.90024076 C 2.9977957,0.78717557 2.7014869,0.72479477 2.3973806,0.72479477 c -0.9084204,0 -1.4971392,0.56922483 -1.4971392,1.41916313 0,0.818748 0.5536296,1.36458 1.3879728,1.36458 z" style="font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke:none" id="path9293" /> </g> </svg>`;
            const icoPlayer = `<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2" /> <g id="layer1" style="fill:#ffffff;fill-opacity:1;stroke:none" transform="matrix(0.74013018,0,0,0.74013018,0.55005776,0.55005778)"> <g aria-label="G" id="text147" style="font-weight:bold;font-size:5.4836px;font-family:'DejaVu Sans';-inkscape-font-specification:'DejaVu Sans Bold';fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.931837;stroke-linecap:round;stroke-linejoin:round"> <path id="path1202" style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.245993;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers" d="M 2.1154655,0.29958256 A 0.95769183,0.95769183 0 0 0 1.157917,1.2576116 0.95769183,0.95769183 0 0 0 1.5470861,2.0268214 C 1.0473631,2.1507604 0.63085688,2.4696209 0.63085688,3.1299481 V 3.9337508 H 3.6024763 V 3.1299481 c 0,-0.6590471 -0.4175177,-0.9788423 -0.9176706,-1.1031267 A 0.95769183,0.95769183 0 0 0 3.0734944,1.2576116 0.95769183,0.95769183 0 0 0 2.1154655,0.29958256 Z" /> </g> </g> </svg>`;
            const icoRoom = `<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2" /> <path id="path3110" style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.128568;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers" d="M 2.1166666,0.6755942 1.3764382,1.2733867 0.63620985,1.8711792 H 1.094196 V 3.4357827 H 3.1391372 V 1.8711792 H 3.5971234 L 2.856895,1.2733867 Z" /> <rect style="fill:#9c9c9c;fill-opacity:1;stroke:none;stroke-width:0.150738;stroke-linejoin:bevel;paint-order:stroke fill markers" id="rect12310" width="0.49860835" height="0.72685415" x="2.2512157" y="2.7089283" /> <rect style="fill:#9c9c9c;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;paint-order:stroke fill markers" id="rect13248" width="0.47124618" height="0.46280029" x="1.540359" y="1.9300244" /> </svg>`;
            const icoAttrib = `<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2" /> <text xml:space="preserve" style="font-weight:bold;font-size:3.45983px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0126139;stroke-linejoin:bevel;paint-order:stroke fill markers" x="1.644399" y="3.3846965" id="text21025"><tspan id="tspan21023" style="stroke-width:0.0126139" x="1.644399" y="3.3846965">i</tspan></text> </svg>`;
            const icoOther = `<svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" xmlns="http://www.w3.org/2000/svg"><path style="fill:none;stroke:#ffffff;stroke-width:0.264583;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;" d="M 0.69371456,2.1166666 H 3.5396187"/></svg>`;
            const icoObject = `<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" sodipodi:docname="object_ico.svg" inkscape:version="1.2.2 (b0a8486, 2022-12-01)" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <sodipodi:namedview id="namedview38" pagecolor="#505050" bordercolor="#eeeeee" borderopacity="1" inkscape:showpageshadow="0" inkscape:pageopacity="0" inkscape:pagecheckerboard="0" inkscape:deskcolor="#505050" showgrid="false" inkscape:zoom="42.382213" inkscape:cx="4.1408881" inkscape:cy="8.0104359" inkscape:window-width="1916" inkscape:window-height="1074" inkscape:window-x="0" inkscape:window-y="0" inkscape:window-maximized="1" inkscape:current-layer="svg5" showguides="true"> <sodipodi:guide position="2.1166666,4.4412308" orientation="16.206024,0" id="guide328" inkscape:locked="false" /> <sodipodi:guide position="2.3785036,2.3187412" orientation="0,-1" id="guide334" inkscape:locked="false" /> <sodipodi:guide position="2.9715688,0.78298396" orientation="0,-1" id="guide336" inkscape:locked="false" /> <sodipodi:guide position="0.69898409,1.7050026" orientation="1,0" id="guide338" inkscape:locked="false" /> <sodipodi:guide position="3.5343492,2.7683155" orientation="1,0" id="guide340" inkscape:locked="false" /> <sodipodi:guide position="3.5343493,2.9508443" orientation="0,-1" id="guide352" inkscape:locked="false" /> <sodipodi:guide position="3.5343492,1.4150872" orientation="0,-1" id="guide354" inkscape:locked="false" /> <sodipodi:guide position="2.4534171,3.5829476" orientation="0,-1" id="guide1047" inkscape:locked="false" /> </sodipodi:namedview> <defs id="defs2" /> <path style="fill:#ffffff;stroke:none;stroke-width:0.185208;stroke-linecap:round;stroke-dasharray:none;paint-order:stroke fill markers;fill-opacity:1" d="M 2.1166666,0.65038564 3.5343491,1.282489 v 1.5357571 l -1.4176825,0.63832 -1.4176825,-0.63832 V 1.282489 Z" id="path1063" /> <path style="fill:#ffffff;stroke:none;stroke-width:0.185208;stroke-linecap:round;stroke-dasharray:none;paint-order:stroke fill markers;fill-opacity:1" d="M 2.1166666,0.65038564 3.5343491,1.282489 v 1.5357571 l -1.4176825,0.63832 -1.4176825,-0.63832 V 1.282489 Z" id="path2373" /> <path style="fill:none;fill-opacity:1;stroke:#8e8e8e;stroke-width:0.18520833;stroke-linecap:butt;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers;stroke-linejoin:bevel" d="M 0.6989841,1.282489 2.1166666,1.9145921 3.5343491,1.282489" id="path5018" /> <path style="fill:none;fill-opacity:1;stroke:#8e8e8e;stroke-width:0.185208;stroke-linecap:butt;stroke-linejoin:bevel;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers" d="M 2.1166666,1.9145921 V 3.4503492" id="path6370" /> </svg>`;
            const icoMessage = `<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2" /> <rect style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.165345;stroke-linejoin:bevel;paint-order:stroke fill markers" id="rect15482" width="1.9418752" height="2.6706309" x="1.1457291" y="0.78135115" /> <path style="fill:none;fill-opacity:1;stroke:#939393;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" d="M 1.5488185,1.5004032 H 2.6845148" id="path15542" /> <path style="fill:none;fill-opacity:1;stroke:#939393;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" d="M 1.5488185,2.1166666 H 2.6845148" id="path16407" /> </svg>`;
            const icoMove = `<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2" /> <path style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" id="path16515" d="m 2.8393816,2.1992004 -1.0961629,0.6328699 -1.09616284,0.6328699 0,-1.2657398 0,-1.26573985 1.09616294,0.63286995 z" transform="translate(0.37344791,-0.08253377)" /> </svg>`;
            const icoAttack = `<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2" /> <g id="g17152" transform="rotate(45,2.1018541,2.1105311)"> <rect style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.198799;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" id="rect17051" width="0.73135507" height="2.6537266" x="1.7509891" y="0.90471673" /> <path style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" id="path17125" d="m 2.1166666,0.3620086 0.1814879,0.31434643 0.181488,0.31434643 -0.3629759,-1e-8 -0.362976,-10e-9 0.181488,-0.31434641 z" transform="translate(7.521059e-8,-0.07733837)" /> <rect style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" id="rect17127" width="2.029305" height="0.49957958" x="1.1020142" y="2.3346605" /> </g> </svg>`;
            const icoGlobal = `<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2" /> <circle style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" id="path17273" cx="2.1166666" cy="2.1166666" r="1.3248924" /> <path style="fill:none;fill-opacity:1;stroke:#8e8e8e;stroke-width:0.19686;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" d="M 1.1448412,2.1166666 H 3.0884921" id="path17275" /> </svg>`;
            const icoAction = `<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2" /> <g aria-label="!" id="text18965" style="font-weight:bold;font-size:4.37606px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0159544;stroke-linejoin:bevel;paint-order:stroke fill markers"> <path d="m 1.9000508,2.5849076 h 0.437606 L 2.3989217,0.57629608 H 1.838786 Z m 0.214427,1.0721347 c 0.223179,0 0.3763411,-0.1619142 0.3763411,-0.3719651 0,-0.223179 -0.1531621,-0.3850933 -0.3763411,-0.3850933 -0.2231791,0 -0.3719651,0.1619143 -0.3719651,0.3850933 0,0.2100509 0.148786,0.3719651 0.3719651,0.3719651 z" id="path19468" /> </g> </svg>`;
            const icoInput = `<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2" /> <path style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;paint-order:stroke fill markers" id="path19523" d="m 1.275162,2.0133541 -0.7057629,0.4074724 -0.70576287,0.4074724 3e-8,-0.8149449 -3e-8,-0.8149447 0.70576291,0.4074724 z" transform="translate(0.61360234,0.10331256)" /> <path style="fill:none;fill-opacity:1;stroke:#ffffff;stroke-width:0.185208;stroke-linejoin:bevel;paint-order:stroke fill markers;stroke-opacity:1" d="M 1.952999,2.9316113 H 3.5563688" id="path19525" /> </svg>`;
            const icoLogic = `<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2" /> <g aria-label="?" id="text20223" style="font-weight:bold;font-size:3.75627px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;stroke-width:0.0136947;stroke-linejoin:bevel;paint-order:stroke fill markers"> <path d="m 1.8931671,2.5486401 h 0.47329 V 2.3983893 c 0,-0.3042579 0.5446591,-0.4432398 0.5446591,-0.9766302 0,-0.4019209 -0.3080141,-0.6460784 -0.8151106,-0.6460784 -0.2629389,0 -0.5409028,0.0676129 -0.7737916,0.18405722 L 1.4349021,1.3240961 c 0.180301,-0.086394 0.3606019,-0.1277132 0.5371466,-0.1277132 0.277964,0 0.4394836,0.1089319 0.4394836,0.2892328 0,0.319283 -0.5183652,0.47329 -0.5183652,0.9127736 z m 0.236645,0.9090173 c 0.1878135,0 0.3192829,-0.1352257 0.3192829,-0.3192829 0,-0.1953261 -0.1277132,-0.3305518 -0.3192829,-0.3305518 -0.1915698,0 -0.3230392,0.1352257 -0.3230392,0.3305518 0,0.1840572 0.1352257,0.3192829 0.3230392,0.3192829 z" id="path20755" /> </g> </svg>`;
            const icoInject = `<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2" /> <path style="fill:none;fill-opacity:1;stroke:#ffffff;stroke-width:0.185208;stroke-linejoin:bevel;paint-order:stroke fill markers;stroke-opacity:1" d="M 1.952999,2.9316113 H 3.5563688" id="path19525" /> <text xml:space="preserve" style="font-weight:bold;font-size:3.24209px;font-family:System-ui;-inkscape-font-specification:'System-ui Bold';fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.0118201;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" x="0.22496246" y="3.1849368" id="text20814"><tspan id="tspan20812" style="stroke-width:0.0118201" x="0.22496246" y="3.1849368">+</tspan></text> </svg>`;
            const icoSet = `<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2" /> <path style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;paint-order:stroke fill markers" id="path19523" d="m 1.275162,2.0133541 -0.7057629,0.4074724 -0.70576287,0.4074724 3e-8,-0.8149449 -3e-8,-0.8149447 0.70576291,0.4074724 z" transform="translate(0.61360234,0.10331256)" /> <rect style="fill:#ffffff;stroke-width:0.185208;stroke-linejoin:bevel;paint-order:stroke fill markers" id="rect20904" width="1.4300268" height="1.9852276" x="2.4454238" y="1.1240529" /> </svg>`;
            const icoNav = `<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg width="16" height="16" viewBox="0 0 4.2333332 4.2333333" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2" /> <path style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" id="path1135" d="m 2.1166666,-0.50851178 0.3327753,0.5763839 0.3327754,0.57638386 -0.6655507,-7e-8 -0.6655508,4e-8 0.3327754,-0.57638383 z" transform="matrix(0.84700546,0,0,0.84700546,0.32383842,0.7832153)" /> <path style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" id="path1617" d="m 2.1166666,-0.50851178 0.3327753,0.5763839 0.3327754,0.57638386 -0.6655507,-7e-8 -0.6655508,4e-8 0.3327754,-0.57638383 z" transform="matrix(0,0.84700546,-0.84700546,0,3.464608,0.33165152)" /> <path style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" id="path1619" d="m 2.1166666,-0.50851178 0.3327753,0.5763839 0.3327754,0.57638386 -0.6655507,-7e-8 -0.6655508,4e-8 0.3327754,-0.57638383 z" transform="matrix(-0.84700546,0,0,-0.84700546,3.9016279,3.460076)" /> <path style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.185208;stroke-linejoin:bevel;stroke-opacity:1;paint-order:stroke fill markers" id="path1621" d="m 2.1166666,-0.50851178 0.3327753,0.5763839 0.3327754,0.57638386 -0.6655507,-7e-8 -0.6655508,4e-8 0.3327754,-0.57638383 z" transform="matrix(0,-0.84700546,0.84700546,0,0.76085834,3.9116397)" /> </svg>`;

        // Global Vars
            const adminInput = document.getElementById("admin-input");
            const adminInterface = document.getElementById("admin-interface");
            const adminInputContainer = document.getElementById("admin-input-container");
            const treeview = document.getElementById("treeview");
            const details = document.getElementById("details");
            const editorContainer = document.getElementById("editor-container");
            const elementTypes = [
                "action", "attack", "attribute", "custom", "dev_note", "enter_message", "flee", "global", "injection",
                "input", "link", "logic", "message", "move", "navigation", "nothing", "npc", "object",
                "room", "round", "rule", "ruleset", "set", "test", "travel"
            ];


        function createNewElement(elementKey, elementType, name, doLogging, doShowDetails)
        {
            if (elementKey == "")
            {
                elementKey = getGuid();
            }

            let entry = {
                ElementType: elementType,
                ElementKey: elementKey,
                Name: name,
                ParentKey: currentParent,
                Syntax: "",
                Logic: "",
                Output: "",
                Tags: "",
                Repeat: "",
                RepeatIndex: "0",
                Template: "",
                Active: "true",
                Sort: ""
            };

            database.push(entry);

            if (entry.ParentKey) {
                newElementParentKey = entry.ParentKey;
            }

            if (doShowDetails)
            {
                showDetails(entry);
            }

            buildTreeView();

            if (doLogging == true)
            {
                logAdminMessage("Added: " + entry.Name);
            }
        }

        function createNewFullElement(
            elementType,
            elementKey,
            name,
            parentKey,
            syntax,
            logic,
            output,
            tags,
            repeat,
            sort
        )
        {
            if (elementKey == "")
            {
                elementKey = getGuid();
            }

            let entry = {
                ElementType: elementType,
                ElementKey: elementKey,
                Name: name,
                ParentKey: parentKey,
                Syntax: syntax,
                Logic: logic,
                Output: output,
                Tags: tags,
                Repeat: repeat,
                RepeatIndex: "0",
                Template: "",
                Active: "true",
                Sort: sort
            };

            database.push(entry);
        }

        function updateElementType(item, newType)
        {
            item.ElementType = newType;
            showDetails(item);
        }


        function logAdminMessage(message)
        {
            details.innerHTML = message + "<br>";
            details.scrollTop = details.scrollHeight;
        }

        function getGuid()
        {
            return Math.random().toString(36).substring(2) + (new Date()).getTime().toString(36);
        }

        function processInput(command)
        {
            if (command === "!_admin") {
                enterAdminMode();
                return;
            }
        }

        function processAdminInput(command)
        {
            if (command === "exit") {
                exitAdminMode();
            }

            if (command.startsWith("add ")) {
                createNewElement("", "", command.substring(4), true, true);
            } else if (command === "save") {
                saveFile();
            } else {
                logMessage("Unknown command: " + command);
            }
        }

        // !@! [saving save file savefile]
        function saveFile()
        {
            let elemLimit = 5; // Number of elements per line
            let htmlDoc = document.documentElement.cloneNode(true);

            // Make sure the latest database is stored
            let latestDatabase = JSON.parse(JSON.stringify(database)); // Deep clone to ensure correctness

            // Build compact JSON with newlines every elemLimit items
            let lines = [];
            for (let i = 0; i < latestDatabase.length; i += elemLimit) {
                let chunk = latestDatabase.slice(i, i + elemLimit);
                lines.push(JSON.stringify(chunk).slice(1, -1)); // Strip [ and ]
            }
            let formattedDatabase = `[\n  ${lines.join(",\n  ")}\n]`;

            // Ensure correct replacement of the old database
            let htmlContent = "<!DOCTYPE html>" + htmlDoc.outerHTML;
            htmlContent = htmlContent.replace(/let database = \[([\s\S]*?)\];/, `let database = ${formattedDatabase};`);

            let blob = new Blob([htmlContent], { type: "text/html" });
            let a = document.createElement("a");
            a.href = URL.createObjectURL(blob);
            a.download = "worldweaver.html";
            a.click();
        }

        function enterAdminMode()
        {
            adminInterface.style.display = "flex";  // Show admin interface
            adminInputContainer.style.display = "flex";  // Show admin input field
            buildTreeView();
            adminInput.focus();  // Focus the admin input field
        }

        function buildTreeView()
        {
            // Save the currently expanded nodes
            expandedNodes.clear();
            document.querySelectorAll("#treeview ul").forEach(ul => {
                if (ul.style.display === "block") {
                    let parentLi = ul.closest("li");
                    if (parentLi && parentLi.dataset.key) {
                        expandedNodes.add(parentLi.dataset.key);
                    }
                }
            });

            if (newElementParentKey) {
                expandedNodes.add(newElementParentKey);
                newElementParentKey = "";
            }

            treeview.innerHTML = "";
            let rootItems = database.filter(item => item.ParentKey === null);
            let ul = document.createElement("ul");
            rootItems.forEach(item => ul.appendChild(createTreeNode(item)));
            treeview.appendChild(ul);
        }

        function createTreeNode(item)
        {
            let li = document.createElement("li");
            li.dataset.key = item.ElementKey; // Store the ElementKey as a dataset

            let span = document.createElement("span");
            span.style.cursor = "pointer";

            // Determine which icon to use
            let iconHTML = "";
            switch (item.ElementType)
            {
                case "game":
                    iconHTML = icoGame;
                    break;

                case "player":
                case "npc":
                    iconHTML = icoPlayer;
                    break;

                case "room":
                    iconHTML = icoRoom;
                    break;

                case "object":
                    iconHTML = icoObject;
                    break;

                case "message":
                case "dev_note":
                case "enter_message":
                    iconHTML = icoMessage;
                    break;

                case "action":
                    iconHTML = icoAction;
                    break;

                case "move":
                case "travel":
                    iconHTML = icoMove;
                    break;

                case "attack":
                    iconHTML = icoAttack;
                    break;

                case "global":
                    iconHTML = icoGlobal;
                    break;

                case "input":
                    iconHTML = icoInput;
                    break;

                case "logic":
                    iconHTML = icoLogic;
                    break;

                case "injection":
                case "link":
                    iconHTML = icoInject;
                    break;

                case "set":
                    iconHTML = icoSet;
                    break;

                case "navigation":
                    iconHTML = icoNav;
                    break;

                case "attribute":
                    iconHTML = icoAttrib;
                    break;

                default:
                    iconHTML = icoOther;
                    break;
            }

            // Set the inner HTML with the icon and text
            span.innerHTML = `${iconHTML} ${item.Name}`;

            span.addEventListener("click", (event) => {
                event.stopPropagation();
                showDetails(item);
                let childUl = li.querySelector("ul");
                if (childUl) {
                    let isExpanded = childUl.style.display === "block";
                    childUl.style.display = isExpanded ? "none" : "block";

                    if (isExpanded) {
                        expandedNodes.delete(item.ElementKey);
                    } else {
                        expandedNodes.add(item.ElementKey);
                    }
                }
            });

            li.appendChild(span);

            let children = database.filter(child => child.ParentKey === item.ElementKey);
            if (children.length > 0) {
                children.sort((a, b) => parseInt(a.Sort) - parseInt(b.Sort));

                let ul = document.createElement("ul");
                ul.style.display = expandedNodes.has(item.ElementKey) ? "block" : "none";
                children.forEach(child => ul.appendChild(createTreeNode(child)));
                li.appendChild(ul);
            }

            return li;
        }

        function isSpecialSyntax(str)
        {
            str = str.trim(); // Ensure no leading/trailing spaces
            const pattern = /^\[[a-zA-Z0-9_]+\]\(\([a-zA-Z0-9_]+\)\)$/;
            const result = pattern.test(str);

            return result;
        }

        function escapeSpecialChars(str)
        {
            return str
                .replace(/[-\/\\^$+?.()|[\]{}]/g, "\\$&") // Escape special regex characters
                .replace(/\*/g, ".*"); // Convert * to .*
        }

        function showEditor(item, currentField)
        {
            editorContainer.innerHTML = `
                <div id="editor-close">X</div>
                <textarea id="editor"></textarea>
            `;

            let editor = document.getElementById("editor");
            let editorClose = document.getElementById("editor-close");
            document.getElementById("details").style.display = "none";
            document.getElementById("editor-container").style.display = "flex";
            const btn = document.getElementById("editor-close");

            switch (currentField)
            {
                case "logic":
                    if (item.Logic == null)
                    {
                        editor.value = "";
                    }
                    else
                    {
                        editor.value = item.Logic;
                    }
                    break;
                case "output":
                    if (item.Output == null)
                    {
                        editor.value = "";
                    }
                    else
                    {
                        editor.value = item.Output;
                    }
                    break;
            }
            editor.focus();

            editor.addEventListener("keydown", function(event) {
                if (event.key === "Escape") {
                    switch (currentField)
                    {
                        case "logic":
                            item.Logic = editor.value;
                            break;
                        case "output":
                            item.Output = editor.value;
                            break;
                    }
                    closeEditor(item);
                }
            });
            btn.addEventListener("click", function(event) {
                switch (currentField)
                {
                    case "logic":
                        item.Logic = editor.value;
                        break;
                    case "output":
                        item.Output = editor.value;
                        break;
                }
                closeEditor(item);
            });
        }

        function closeEditor(item)
        {
            document.getElementById("details").style.display = "block";
            document.getElementById("editor-container").style.display = "none";
            showDetails(item);
            adminInput.focus();  // Focus the admin input field
        }

        // !@! details
        function showDetails(item)
        {
            currentParent = item.ElementKey;
            
            let parentDropdown = `<select id="parentSelect">`;
            parentDropdown += `<option value="null" ${item.ParentKey === null ? "selected" : ""}>No Parent</option>`;
            database.forEach(otherItem => {
                if (otherItem.ElementKey !== item.ElementKey && otherItem.ElementType !== "attribute") {
                    parentDropdown += `<option value="${otherItem.ElementKey}" ${item.ParentKey === otherItem.ElementKey ? "selected" : ""}>${otherItem.Name}</option>`;
                }
            });
            parentDropdown += `</select>`;

            details.innerHTML = `
                <p><strong>Element Type:</strong><span id="element-type-parent"><span id="element-type" class="link">${item.ElementType || "Click to Edit"}</span></span></p>
                <p><strong>Element Key:</strong> <span id="element-key" class="link">${item.ElementKey}</span></p>
                <p><strong>Name:</strong> <span id="element-name" class="link">${item.Name || "Click to Edit"}</span></p>
                <p><strong>Parent Key:</strong> ${(item.ElementType != "game") ? parentDropdown : ""}</p>
                <p><strong>Syntax:</strong> <span id="syntax-caption" class="link">${item.Syntax || "Click to Edit"}</span></p>
                <p><strong>Logic:</strong> <span id="logic-field" class="link">${item.Logic || "Click to View/Edit"}</span></p>
                <p><strong>Output:</strong> <span id="output-field" class="link">${(item.Output && item.Output.length > 100) ? item.Output.substring(0, 100)+"..." : item.Output || "Click to View/Edit"}</span></p>
                <p><strong>Tags:</strong> <span id="tags-field" class="link">${item.Tags || "Click to Edit"}</span></p>
                <p><strong>Repeat:</strong> <span id="repeat-field-parent"><span id="repeat-field" class="link">${item.Repeat || "Click to Edit"}</span><span></p>
                <p><strong>Active:</strong> <span><input id="element-active" type="checkbox" ${(item.Active === "true") ? "checked" : ""} /></span></p>
                <p><strong>Sort:</strong> <span id="sort-field" class="link">${item.Sort || "Click to Edit"}</span></p>
                <br />
                <p><span id="delete-element" class="link">Delete</span></p>
            `;

            document.getElementById("element-active").addEventListener("change", function() {
                if (document.getElementById("element-active").checked) {
                    item.Active = "true";
                } else {
                    item.Active = "false";
                }
            });

            // Handle inline editing for ElementKey
            document.getElementById("element-key").addEventListener("click", function() {
                let inputField = document.createElement("input");
                inputField.type = "text";
                inputField.value = item.ElementKey;
                inputField.style = "width: 200px";
                inputField.select();

                inputField.addEventListener("keypress", function(event) {
                    if (event.key === "Enter") {
                        let newKey = inputField.value.trim();

                        if (newKey == "")
                        {
                            newKey = getGuid();
                        }

                        newKey = newKey.replace(" ", "_");
                        
                        if (newKey && !database.some(entry => entry.ElementKey === newKey)) {
                            // Update ElementKey in the database
                            item.ElementKey = newKey;
                            buildTreeView(); // Rebuild tree view
                        }
                        
                        // Restore original ElementKey if not unique
                        showDetails(item);
                    }
                });

                inputField.addEventListener("keydown", function(event) {
                    if (event.key === "Escape") {
                        showDetails(item);
                    }
                });

                this.replaceWith(inputField);
                inputField.focus();
            });

            function showEditField(currItem, fieldName)
            {
                let parent = null;
                let textField = null;
                let inputField = document.createElement("input");
                inputField.type = "text";

                switch(fieldName)
                {
                    case "name":
                        inputField.value = item.Name;
                        inputField.style = "width: 200px";
                        break;
                    case "sort":
                        inputField.type = "number";
                        inputField.value = item.Sort;
                        inputField.style = "width: 50px";
                        break;
                    case "tags":
                        inputField.value = item.Tags;
                        inputField.style = "width: 500px";
                        break;
                    case "repeat":
                        inputField = document.createElement("select");
                        const options = ["none", "random", "repeat", "other"];
                        options.forEach(option => {
                            let opt = document.createElement("option");
                            opt.value = option;
                            opt.textContent = option;
                            inputField.appendChild(opt);
                        });
                        inputField.value = item.Repeat;
                        parent = document.getElementById("repeat-field-parent");
                        
                        textField = document.createElement("input");
                        textField.type = "text";
                        textField.style.width = "100px";
                        
                        inputField.addEventListener("change", function() {
                            if (inputField.value === "other") {
                                if (parent) {
                                    parent.replaceChild(textField, inputField); // Replace dropdown with textbox
                                }
                                textField.value = item.Repeat;
                                textField.focus();
                                textField.select();

                                textField.addEventListener("keydown", function(event) {
                                    if (event.key === "Enter") {
                                        item.Repeat = textField.value.trim();
                                        buildTreeView();
                                        showDetails(item);
                                        return;
                                    }
                                    if (event.key === "Escape") {
                                        showDetails(item);
                                    }
                                });
                            } else {
                                item.Repeat = inputField.value;
                                buildTreeView();
                                showDetails(item);
                                return;
                            }
                        });
                        break;
                    case "type":
                        if (item.ElementType === "game" || item.ElementType === "player") {
                            showDetails(item);
                        }
                        inputField = document.createElement("select");
                        inputField.style.width = "200px";
                        elementTypes.forEach(option => {
                            let opt = document.createElement("option");
                            opt.value = option;
                            opt.textContent = option;
                            inputField.appendChild(opt);
                        });
                        inputField.value = item.ElementType;
                        parent = document.getElementById("element-type-parent");
                        
                        textField = document.createElement("input");
                        textField.type = "text";
                        textField.style.width = "200px";
                        
                        inputField.addEventListener("change", function() {
                            if (inputField.value === "custom") {
                                if (parent) {
                                    parent.replaceChild(textField, inputField); // Replace dropdown with textbox
                                }
                                textField.value = item.ElementType;
                                textField.focus();
                                textField.select();

                                textField.addEventListener("keydown", function(event) {
                                    if (event.key === "Enter") {
                                        item.ElementType = textField.value.trim();
                                        buildTreeView();
                                        showDetails(item);
                                        return;
                                    }
                                    if (event.key === "Escape") {
                                        showDetails(item);
                                    }
                                });
                            } else {
                                item.ElementType = inputField.value;
                                buildTreeView();
                                showDetails(item);
                                return;
                            }
                        });
                        break;
                }

                try {
                    inputField.select();
                }
                catch(err) {
                    // select not possible - likely due to it being a drop down
                }

                inputField.addEventListener("keypress", function(event) {
                    if (event.key === "Enter") {

                        switch(fieldName)
                        {
                            case "name":
                                item.Name = inputField.value.trim();
                                break;
                            case "sort":
                                item.Sort = inputField.value.trim();
                                break;
                            case "tags":
                                item.Tags = inputField.value.trim();
                                break;
                            case "repeat":
                                item.Repeat = inputField.value === "other" ? textField.value.trim() : inputField.value;
                                break;
                            case "type":
                                item.ElementType = inputField.value === "custom" ? textField.value.trim() : inputField.value;
                                break;
                        }

                        buildTreeView();
                        showDetails(item);
                    }
                });

                inputField.addEventListener("keydown", function(event) {
                    if (event.key === "Escape") {
                        showDetails(item);
                    }
                });

                currItem.replaceWith(inputField);
                inputField.focus();
            }

            // !@! delete
            function deleteElement(elementKey) {
                // Find all children of the element
                let children = database.filter(el => el.ParentKey === elementKey);

                // Recursively delete each child first
                for (let child of children) {
                    deleteElement(child.ElementKey);
                }

                // Now remove the element itself
                let index = database.findIndex(el => el.ElementKey === elementKey);
                if (index !== -1) {
                    database.splice(index, 1);
                }
            }

            // Handle inline editing for ElementType
            document.getElementById("element-type").addEventListener("click", function() {
                showEditField(this, "type");
            });

            // Handle inline editing for ElementName
            document.getElementById("element-name").addEventListener("click", function() {
                showEditField(this, "name");
            });

            // Handle inline editing for Tags
            document.getElementById("tags-field").addEventListener("click", function() {
                showEditField(this, "tags");
            });

            // Handle inline editing for Sort
            document.getElementById("sort-field").addEventListener("click", function() {
                showEditField(this, "sort");
            });

            // Handle inline editing for Repeat
            document.getElementById("repeat-field").addEventListener("click", function() {
                showEditField(this, "repeat");
            });

            // Add event listener for syntax caption click
            document.getElementById("syntax-caption").addEventListener("click", function() {
                let inputField = document.createElement("input");
                inputField.type = "text";
                inputField.value = item.Syntax || "";
                inputField.style = "width: 400px";
                inputField.select();
                inputField.addEventListener("keypress", function(event) {
                    if (event.key === "Enter") {
                        let inputText = inputField.value.trim();
                        if (inputText)
                        {
                            try {
                                if (inputText.startsWith('\\b') && inputText.endsWith('\\b')) {
                                    item.Syntax = inputText;
                                    showDetails(item);
                                    return;
                                }

                                // If input is special syntax, store it as-is and exit
                                if (isSpecialSyntax(inputText)) {
                                    item.Syntax = inputText;
                                    showDetails(item);
                                    return; // Exit event listener
                                }

                                // Otherwise, process normally (escape and wildcard handling)
                                let escapedInput = inputText
                                    .split("|")
                                    .map(part => part.trim())
                                    .map(part => escapeSpecialChars(part)) // Escape regex special characters
                                    .join("|");

                                // Construct the regex string
                                let regexString = `\\b(${escapedInput})\\b`; // Match whole words
                                item.Syntax = regexString;

                                showDetails(item); // Update details view
                            } catch (error) {
                                alert("Error generating regex: " + error.message);
                            }
                        }
                        else
                        {
                            item.Syntax = "";
                            showDetails(item);
                        }

                    }
                });
                inputField.addEventListener("keydown", function(event) {
                    if (event.key === "Escape") {
                        showDetails(item);
                    }
                });

                // Replace the caption with the input field
                this.replaceWith(inputField);
                inputField.focus();  // Focus on the input field
            });

            // Update parent key when selection changes
            if (document.getElementById("parentSelect")) {
                document.getElementById("parentSelect").addEventListener("change", function() {
                    let newParentKey = this.value === "null" ? null : this.value;
                    if (item.ParentKey !== newParentKey) {
                        item.ParentKey = newParentKey;
                        buildTreeView(); // Rebuild the tree view after the parent key change
                    }
                });
            }

            document.getElementById("logic-field").addEventListener("click", function() {
                showEditor(item, "logic");
            });

            document.getElementById("output-field").addEventListener("click", function() {
                showEditor(item, "output");
            });

            // Handle delete
            document.getElementById("delete-element").addEventListener("click", function() {
                deleteElement(item.ElementKey);
                buildTreeView();
                details.innerHTML = "Select an item to see details.";
            });

            adminInput.focus();  // Focus the admin input field
        }

        // Events
        adminInput.addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                let command = adminInput.value.trim();
                if (command) {
                    processAdminInput(command);
                }
                adminInput.value = "";
            }
        });
        window.onload = function() {
            // Ensure the database is not overwritten if it was injected from a saved file
            if (!Array.isArray(database) || database.length === 0) {
                database = [];
                createNewElement("game", "game", "Game", false, false);
                createNewElement("player", "player", "Player", false, false);
            }

            enterAdminMode();
        };
    </script>






</body></html>
